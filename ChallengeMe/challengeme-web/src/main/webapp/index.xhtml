<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <script name="jquery/jquery.js" library="primefaces"></script>
    <title>Register Employee</title>
</h:head>
<h:form>
	<p:messages id="messages" showDetail="true" autoUpdate="true" />
    <p:panelGrid columns="2">
        <p:outputLabel for="name" value="Enter Employee Name:"></p:outputLabel>
        <p:inputText id="name" value="#{userRegister.user.name}" required="true" validatorMessage="Name is required"></p:inputText>
        <p:outputLabel for="email" value="Enter Employee Email:"></p:outputLabel>
        <p:inputText id="email" value="#{userRegister.user.email}" required="true" >
        <f:validator validatorId="custom.emailValidator" />
        </p:inputText>
        <p:outputLabel for="pwd" value="Enter Employee Password:"></p:outputLabel>
        <p:password id="pwd" value="#{userRegister.user.password}" required="true"></p:password>                    
    </p:panelGrid>
    <p:commandButton value="Register" action="#{userRegister.register}" update="messages" ajax="false" validateClient="true"></p:commandButton>
</h:form>
<script type="text/javascript">
    /**
     * Faces Validator
     */
    PrimeFaces.validator['custom.emailValidator'] = {
 
        pattern: /\S+@\S+/,
 
        validate: function(element, value) {
            //use element.data() to access validation metadata, in this case there is none.
            if(!this.pattern.test(value)) {
                throw {
                    summary: 'Validation Error',
                    detail: value + ' is not a valid email.'
                }
            }
        }
    };
</script>
</html>